"use strict";(self.webpackChunk_ibm_aiops_ui_extension_template=self.webpackChunk_ibm_aiops_ui_extension_template||[]).push([[927],{2249:function(module,__webpack_exports__,__webpack_require__){eval('/* harmony import */ var _node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(4860);\n/* harmony import */ var _node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(7028);\n/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _node_modules_css_loader_dist_cjs_js_node_modules_carbon_charts_dist_styles_css__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(4740);\n// Imports\n\n\n\nvar ___CSS_LOADER_EXPORT___ = _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default()((_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default()));\n___CSS_LOADER_EXPORT___.i(_node_modules_css_loader_dist_cjs_js_node_modules_carbon_charts_dist_styles_css__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .A);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, ".hdm--custom-layout-container{display:flex;flex-direction:column}.hdm--custom-layout-container>div{border:unset !important}.hdm--custom-layout-container .heatmap{background:#fff;margin:1rem 1rem 0}.hdm--custom-layout-container .heatmap__heading{display:flex;flex-direction:column;font-size:1.25rem;padding:1rem 1rem 0}.hdm--custom-layout-container .heatmap__subheading{color:#525252;font-size:.875rem;line-height:2rem}.hdm--custom-layout-container .heatmap__chart{padding:1rem}.hdm--custom-layout-container .heatmap__reset{float:right;margin-right:1rem}.hdm--custom-layout-container .heatmap-options-firstrow{align-items:center;column-gap:12px;display:inline-flex}", "",{"version":3,"sources":["webpack://./src/components/heatmap/heatmap.scss"],"names":[],"mappings":"AAOA,8BACE,YAAA,CACA,qBAAA,CAEA,kCACE,uBAAA,CAGF,uCACE,eAAA,CACA,kBAAA,CAEA,gDACE,YAAA,CACA,qBAAA,CACA,iBAAA,CACA,mBAAA,CAGF,mDACE,aAAA,CACA,iBAAA,CACA,gBAAA,CAGF,8CACE,YAAA,CAGF,8CACE,WAAA,CACA,iBAAA,CAIA,wDACE,kBAAA,CACA,eAAA,CACA,mBAAA","sourcesContent":["/**\\n * © Copyright IBM Corp. 2022, 2025\\n * SPDX-License-Identifier: Apache-2.0\\n */\\n\\n@import \'@carbon/charts/styles.css\';\\n \\n.hdm--custom-layout-container {\\n  display: flex;\\n  flex-direction: column;\\n\\n  > div {\\n    border: unset !important;\\n  }\\n  \\n  .heatmap {\\n    background: #fff;\\n    margin: 1rem 1rem 0;\\n    \\n    &__heading {\\n      display: flex;\\n      flex-direction: column;\\n      font-size: 1.25rem;\\n      padding: 1rem 1rem 0;\\n    }\\n    \\n    &__subheading {\\n      color: #525252;\\n      font-size: 0.875rem;\\n      line-height: 2rem;\\n    }\\n    \\n    &__chart {\\n      padding: 1rem;\\n    }\\n    \\n    &__reset {\\n      float: right;\\n      margin-right: 1rem;\\n    }\\n\\n    &-options {\\n      &-firstrow {\\n        align-items: center;\\n        column-gap: 12px;\\n        display: inline-flex;\\n      }\\n    }\\n  }\\n}\\n"],"sourceRoot":""}]);\n// Exports\n/* harmony default export */ __webpack_exports__.A = (___CSS_LOADER_EXPORT___);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjI0OS5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFBO0FBQ2dIO0FBQ2pCO0FBQ3FEO0FBQ3BKLDhCQUE4QixtRkFBMkIsQ0FBQyw0RkFBcUM7QUFDL0YsMEJBQTBCLGdJQUFpQztBQUMzRDtBQUNBLHdFQUF3RSxhQUFhLHNCQUFzQixrQ0FBa0Msd0JBQXdCLHVDQUF1QyxnQkFBZ0IsbUJBQW1CLGdEQUFnRCxhQUFhLHNCQUFzQixrQkFBa0Isb0JBQW9CLG1EQUFtRCxjQUFjLGtCQUFrQixpQkFBaUIsOENBQThDLGFBQWEsOENBQThDLFlBQVksa0JBQWtCLHdEQUF3RCxtQkFBbUIsZ0JBQWdCLG9CQUFvQixPQUFPLGllQUFpZSxvQ0FBb0Msa0JBQWtCLDJCQUEyQixhQUFhLCtCQUErQixLQUFLLGtCQUFrQix1QkFBdUIsMEJBQTBCLHdCQUF3QixzQkFBc0IsK0JBQStCLDJCQUEyQiw2QkFBNkIsT0FBTywyQkFBMkIsdUJBQXVCLDRCQUE0QiwwQkFBMEIsT0FBTyxzQkFBc0Isc0JBQXNCLE9BQU8sc0JBQXNCLHFCQUFxQiwyQkFBMkIsT0FBTyxtQkFBbUIsb0JBQW9CLDhCQUE4QiwyQkFBMkIsK0JBQStCLFNBQVMsT0FBTyxLQUFLLEdBQUcscUJBQXFCO0FBQ3Q1RDtBQUNBLHNEQUFlLHVCQUF1QixFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vQGlibS9haW9wcy11aS1leHRlbnNpb24tdGVtcGxhdGUvLi9zcmMvY29tcG9uZW50cy9oZWF0bWFwL2hlYXRtYXAuc2Nzcz9hYWE0Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIEltcG9ydHNcbmltcG9ydCBfX19DU1NfTE9BREVSX0FQSV9TT1VSQ0VNQVBfSU1QT1JUX19fIGZyb20gXCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L3J1bnRpbWUvc291cmNlTWFwcy5qc1wiO1xuaW1wb3J0IF9fX0NTU19MT0FERVJfQVBJX0lNUE9SVF9fXyBmcm9tIFwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9ydW50aW1lL2FwaS5qc1wiO1xuaW1wb3J0IF9fX0NTU19MT0FERVJfQVRfUlVMRV9JTVBPUlRfMF9fXyBmcm9tIFwiLSEuLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L2Nqcy5qcyEuLi8uLi8uLi9ub2RlX21vZHVsZXMvQGNhcmJvbi9jaGFydHMvZGlzdC9zdHlsZXMuY3NzXCI7XG52YXIgX19fQ1NTX0xPQURFUl9FWFBPUlRfX18gPSBfX19DU1NfTE9BREVSX0FQSV9JTVBPUlRfX18oX19fQ1NTX0xPQURFUl9BUElfU09VUkNFTUFQX0lNUE9SVF9fXyk7XG5fX19DU1NfTE9BREVSX0VYUE9SVF9fXy5pKF9fX0NTU19MT0FERVJfQVRfUlVMRV9JTVBPUlRfMF9fXyk7XG4vLyBNb2R1bGVcbl9fX0NTU19MT0FERVJfRVhQT1JUX19fLnB1c2goW21vZHVsZS5pZCwgXCIuaGRtLS1jdXN0b20tbGF5b3V0LWNvbnRhaW5lcntkaXNwbGF5OmZsZXg7ZmxleC1kaXJlY3Rpb246Y29sdW1ufS5oZG0tLWN1c3RvbS1sYXlvdXQtY29udGFpbmVyPmRpdntib3JkZXI6dW5zZXQgIWltcG9ydGFudH0uaGRtLS1jdXN0b20tbGF5b3V0LWNvbnRhaW5lciAuaGVhdG1hcHtiYWNrZ3JvdW5kOiNmZmY7bWFyZ2luOjFyZW0gMXJlbSAwfS5oZG0tLWN1c3RvbS1sYXlvdXQtY29udGFpbmVyIC5oZWF0bWFwX19oZWFkaW5ne2Rpc3BsYXk6ZmxleDtmbGV4LWRpcmVjdGlvbjpjb2x1bW47Zm9udC1zaXplOjEuMjVyZW07cGFkZGluZzoxcmVtIDFyZW0gMH0uaGRtLS1jdXN0b20tbGF5b3V0LWNvbnRhaW5lciAuaGVhdG1hcF9fc3ViaGVhZGluZ3tjb2xvcjojNTI1MjUyO2ZvbnQtc2l6ZTouODc1cmVtO2xpbmUtaGVpZ2h0OjJyZW19LmhkbS0tY3VzdG9tLWxheW91dC1jb250YWluZXIgLmhlYXRtYXBfX2NoYXJ0e3BhZGRpbmc6MXJlbX0uaGRtLS1jdXN0b20tbGF5b3V0LWNvbnRhaW5lciAuaGVhdG1hcF9fcmVzZXR7ZmxvYXQ6cmlnaHQ7bWFyZ2luLXJpZ2h0OjFyZW19LmhkbS0tY3VzdG9tLWxheW91dC1jb250YWluZXIgLmhlYXRtYXAtb3B0aW9ucy1maXJzdHJvd3thbGlnbi1pdGVtczpjZW50ZXI7Y29sdW1uLWdhcDoxMnB4O2Rpc3BsYXk6aW5saW5lLWZsZXh9XCIsIFwiXCIse1widmVyc2lvblwiOjMsXCJzb3VyY2VzXCI6W1wid2VicGFjazovLy4vc3JjL2NvbXBvbmVudHMvaGVhdG1hcC9oZWF0bWFwLnNjc3NcIl0sXCJuYW1lc1wiOltdLFwibWFwcGluZ3NcIjpcIkFBT0EsOEJBQ0UsWUFBQSxDQUNBLHFCQUFBLENBRUEsa0NBQ0UsdUJBQUEsQ0FHRix1Q0FDRSxlQUFBLENBQ0Esa0JBQUEsQ0FFQSxnREFDRSxZQUFBLENBQ0EscUJBQUEsQ0FDQSxpQkFBQSxDQUNBLG1CQUFBLENBR0YsbURBQ0UsYUFBQSxDQUNBLGlCQUFBLENBQ0EsZ0JBQUEsQ0FHRiw4Q0FDRSxZQUFBLENBR0YsOENBQ0UsV0FBQSxDQUNBLGlCQUFBLENBSUEsd0RBQ0Usa0JBQUEsQ0FDQSxlQUFBLENBQ0EsbUJBQUFcIixcInNvdXJjZXNDb250ZW50XCI6W1wiLyoqXFxuICogwqkgQ29weXJpZ2h0IElCTSBDb3JwLiAyMDIyLCAyMDI1XFxuICogU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEFwYWNoZS0yLjBcXG4gKi9cXG5cXG5AaW1wb3J0ICdAY2FyYm9uL2NoYXJ0cy9zdHlsZXMuY3NzJztcXG4gXFxuLmhkbS0tY3VzdG9tLWxheW91dC1jb250YWluZXIge1xcbiAgZGlzcGxheTogZmxleDtcXG4gIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XFxuXFxuICA+IGRpdiB7XFxuICAgIGJvcmRlcjogdW5zZXQgIWltcG9ydGFudDtcXG4gIH1cXG4gIFxcbiAgLmhlYXRtYXAge1xcbiAgICBiYWNrZ3JvdW5kOiAjZmZmO1xcbiAgICBtYXJnaW46IDFyZW0gMXJlbSAwO1xcbiAgICBcXG4gICAgJl9faGVhZGluZyB7XFxuICAgICAgZGlzcGxheTogZmxleDtcXG4gICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xcbiAgICAgIGZvbnQtc2l6ZTogMS4yNXJlbTtcXG4gICAgICBwYWRkaW5nOiAxcmVtIDFyZW0gMDtcXG4gICAgfVxcbiAgICBcXG4gICAgJl9fc3ViaGVhZGluZyB7XFxuICAgICAgY29sb3I6ICM1MjUyNTI7XFxuICAgICAgZm9udC1zaXplOiAwLjg3NXJlbTtcXG4gICAgICBsaW5lLWhlaWdodDogMnJlbTtcXG4gICAgfVxcbiAgICBcXG4gICAgJl9fY2hhcnQge1xcbiAgICAgIHBhZGRpbmc6IDFyZW07XFxuICAgIH1cXG4gICAgXFxuICAgICZfX3Jlc2V0IHtcXG4gICAgICBmbG9hdDogcmlnaHQ7XFxuICAgICAgbWFyZ2luLXJpZ2h0OiAxcmVtO1xcbiAgICB9XFxuXFxuICAgICYtb3B0aW9ucyB7XFxuICAgICAgJi1maXJzdHJvdyB7XFxuICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xcbiAgICAgICAgY29sdW1uLWdhcDogMTJweDtcXG4gICAgICAgIGRpc3BsYXk6IGlubGluZS1mbGV4O1xcbiAgICAgIH1cXG4gICAgfVxcbiAgfVxcbn1cXG5cIl0sXCJzb3VyY2VSb290XCI6XCJcIn1dKTtcbi8vIEV4cG9ydHNcbmV4cG9ydCBkZWZhdWx0IF9fX0NTU19MT0FERVJfRVhQT1JUX19fO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///2249\n')},4775:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){eval("// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXPORTS\n__webpack_require__.d(__webpack_exports__, {\n  Default: function() { return /* binding */ Default; },\n  Skeleton: function() { return /* binding */ Skeleton; },\n  \"default\": function() { return /* binding */ Heatmap_stories; }\n});\n\n// EXTERNAL MODULE: ./node_modules/react/index.js\nvar react = __webpack_require__(4674);\n// EXTERNAL MODULE: ./node_modules/react-dom/client.js\nvar client = __webpack_require__(5148);\n// EXTERNAL MODULE: ./node_modules/@carbon/react/es/index.js + 52 modules\nvar es = __webpack_require__(6732);\n// EXTERNAL MODULE: ./node_modules/@carbon/charts-react/dist/index.mjs\nvar dist = __webpack_require__(8645);\n// EXTERNAL MODULE: ./src/components/constants.ts\nvar constants = __webpack_require__(4224);\n;// ./src/helpers/getTimeGroupCountsByApp.ts\n/**\n * © Copyright IBM Corp. 2022, 2025\n * SPDX-License-Identifier: Apache-2.0\n */\n\n\nfunction getAlertCountGroups(alerts, timeWindow) {\n  const alertsByApp = {\n    ALL_APPS_FIRST_OCC: {},\n    ALL_APPS_LAST_OCC: {}\n  };\n  const alertCountData = [];\n  const chopOccurrence = occ => {\n    // aggregate by minute\n    if (timeWindow === '15Min') return occ.slice(0, -7) + '00.000Z';\n    // aggregate by hour\n    return occ.slice(0, -10) + '00:00.000Z';\n  };\n  alerts?.forEach(alertRow => {\n    const applicationString = alertRow.fields[constants/* ALERT_QUERY_PARAMS */.vb.columns.indexOf('@insights.type=\\'aiops.ibm.com/insight-type/topology/group\\'')];\n    let application = {\n      id: null,\n      details: {\n        name: null\n      }\n    };\n    if (applicationString) {\n      try {\n        application = JSON.parse(applicationString)[0];\n      } catch {\n        // ignore\n      }\n    }\n    const firstOccurrenceUnchopped = alertRow.fields[constants/* ALERT_QUERY_PARAMS */.vb.columns.indexOf('firstOccurrenceTime')];\n    const lastOccurrenceUnchopped = alertRow.fields[constants/* ALERT_QUERY_PARAMS */.vb.columns.indexOf('lastOccurrenceTime')];\n\n    // prepare data for aggregation by minutes or hours\n    const firstOccurrence = chopOccurrence(firstOccurrenceUnchopped);\n    const lastOccurrence = chopOccurrence(lastOccurrenceUnchopped);\n\n    // data group names as seen in model\n    const {\n      id,\n      details: {\n        name\n      }\n    } = application;\n    const firstGroupKey = (name || 'None') + '_' + id + '_first';\n    const lastGroupKey = (name || 'None') + '_' + id + '_last';\n\n    // initialize obj if necessary\n    if (!alertsByApp[firstGroupKey]?.[firstOccurrence]) alertsByApp[firstGroupKey] = {\n      ...alertsByApp[firstGroupKey],\n      [firstOccurrence]: 0\n    };\n    if (!alertsByApp[lastGroupKey]?.[lastOccurrence]) alertsByApp[lastGroupKey] = {\n      ...alertsByApp[lastGroupKey],\n      [lastOccurrence]: 0\n    };\n    if (!alertsByApp[constants/* ALL_APPS_FIRST_OCC */.Gg]?.[firstOccurrence]) alertsByApp[constants/* ALL_APPS_FIRST_OCC */.Gg] = {\n      ...alertsByApp[constants/* ALL_APPS_FIRST_OCC */.Gg],\n      [firstOccurrence]: 0\n    };\n    if (!alertsByApp[constants/* ALL_APPS_LAST_OCC */.Kx]?.[lastOccurrence]) alertsByApp[constants/* ALL_APPS_LAST_OCC */.Kx] = {\n      ...alertsByApp[constants/* ALL_APPS_LAST_OCC */.Kx],\n      [lastOccurrence]: 0\n    };\n\n    // increment alert count for that application + occurrence\n    alertsByApp[firstGroupKey][firstOccurrence]++;\n    alertsByApp[lastGroupKey][lastOccurrence]++;\n\n    // increment alert count for that occurrence over all apps\n    alertsByApp[constants/* ALL_APPS_FIRST_OCC */.Gg][firstOccurrence]++;\n    alertsByApp[constants/* ALL_APPS_LAST_OCC */.Kx][lastOccurrence]++;\n  });\n  for (const groupKey in alertsByApp) {\n    for (const date of Object.keys(alertsByApp[groupKey]).sort()) {\n      alertCountData.push({\n        group: groupKey,\n        date: date,\n        value: alertsByApp[groupKey][date]\n      });\n    }\n  }\n  return alertCountData;\n}\n// EXTERNAL MODULE: ./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\nvar injectStylesIntoStyleTag = __webpack_require__(5072);\nvar injectStylesIntoStyleTag_default = /*#__PURE__*/__webpack_require__.n(injectStylesIntoStyleTag);\n// EXTERNAL MODULE: ./node_modules/style-loader/dist/runtime/styleDomAPI.js\nvar styleDomAPI = __webpack_require__(7825);\nvar styleDomAPI_default = /*#__PURE__*/__webpack_require__.n(styleDomAPI);\n// EXTERNAL MODULE: ./node_modules/style-loader/dist/runtime/insertBySelector.js\nvar insertBySelector = __webpack_require__(7659);\nvar insertBySelector_default = /*#__PURE__*/__webpack_require__.n(insertBySelector);\n// EXTERNAL MODULE: ./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\nvar setAttributesWithoutAttributes = __webpack_require__(5056);\nvar setAttributesWithoutAttributes_default = /*#__PURE__*/__webpack_require__.n(setAttributesWithoutAttributes);\n// EXTERNAL MODULE: ./node_modules/style-loader/dist/runtime/insertStyleElement.js\nvar insertStyleElement = __webpack_require__(540);\nvar insertStyleElement_default = /*#__PURE__*/__webpack_require__.n(insertStyleElement);\n// EXTERNAL MODULE: ./node_modules/style-loader/dist/runtime/styleTagTransform.js\nvar styleTagTransform = __webpack_require__(1113);\nvar styleTagTransform_default = /*#__PURE__*/__webpack_require__.n(styleTagTransform);\n// EXTERNAL MODULE: ./node_modules/css-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!./src/components/heatmap/heatmap.scss\nvar heatmap = __webpack_require__(2249);\n;// ./src/components/heatmap/heatmap.scss\n\n      \n      \n      \n      \n      \n      \n      \n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = (styleTagTransform_default());\noptions.setAttributes = (setAttributesWithoutAttributes_default());\n\n      options.insert = insertBySelector_default().bind(null, \"head\");\n    \noptions.domAPI = (styleDomAPI_default());\noptions.insertStyleElement = (insertStyleElement_default());\n\nvar update = injectStylesIntoStyleTag_default()(heatmap/* default */.A, options);\n\n\n\n\n       /* harmony default export */ var heatmap_heatmap = (heatmap/* default */.A && heatmap/* default */.A.locals ? heatmap/* default */.A.locals : undefined);\n\n// EXTERNAL MODULE: ./node_modules/@ibm/akora-renderer-react/dist/akora-renderer-react.umd.js\nvar akora_renderer_react_umd = __webpack_require__(1515);\nvar akora_renderer_react_umd_default = /*#__PURE__*/__webpack_require__.n(akora_renderer_react_umd);\n;// ./src/components/heatmap/Heatmap.tsx\n/**\n * © Copyright IBM Corp. 2022, 2025\n * SPDX-License-Identifier: Apache-2.0\n */\n\n\n\n\n// @ts-ignore\n\n\n\n\n\n// @ts-ignore\n\nconst ReactRenderer = akora_renderer_react_umd_default()(react, client);\nconst {\n  useAkoraState,\n  setUrlParameters\n} = ReactRenderer.components;\nconst className = 'heatmap';\nconst Heatmap = props => {\n  const {\n    data,\n    loading,\n    refetch: fetchAlerts\n  } = props;\n  const alerts = data?.tenant.alerts.rows;\n  const {\n    state,\n    app\n  } = useAkoraState();\n  const chartRef = (0,react.useRef)(null);\n  const [useFirstOccurrence, setUseFirstOccurrence] = (0,react.useState)(true);\n  const [useLastOccurrence, setUseLastOccurrence] = (0,react.useState)(false);\n  // we want to rerender when timewindow updates but we also want to use it in event listener so we need ref + state mgmt\n  const [timeWindow, setTimeWindow] = (0,react.useState)('15Min');\n  const timeWindowRef = (0,react.useRef)('15Min');\n  const targetUrl = app.resolvePathExpression(state.path);\n  const {\n    title\n  } = app.getStateForPath(targetUrl);\n  const alertCountGroups = (0,react.useMemo)(() => getAlertCountGroups(alerts, timeWindow), [alerts, timeWindow]);\n  const getTimeWindowLeftEdge = () => {\n    // replace with line below for accurate chart (this date is for example purposes)\n    const threshold = new Date('2023-08-22T16:49:00.000Z');\n    // const threshold = new Date(); // todo change to date now\n    let dateThresh;\n    // window is either last 15 min or last 24 hours\n    if (timeWindow === '15Min') {\n      dateThresh = threshold;\n      dateThresh.setMinutes(threshold.getMinutes() - 15);\n    } else {\n      dateThresh = new Date(threshold.getTime() - 24 * 60 * 60 * 1000);\n    }\n    return dateThresh.toISOString();\n  };\n  const onPointClick = filterStr => {\n    const newRoute = setUrlParameters(state?.resolvedFullPath || state?.fullPath, {\n      filtername: 'All alerts',\n      filterwhereclause: filterStr\n    });\n    app.replaceRoute(newRoute);\n  };\n  const getFilteredFirstLast = alertCount => {\n    // filter out first occurrence data points if necessary\n    const filteredFirst = useFirstOccurrence ? alertCount : alertCount.filter(dp => dp.group.slice(-5) !== 'first');\n    // filter out last occurrence data points if necessary\n    const filteredLast = useLastOccurrence ? filteredFirst : filteredFirst.filter(dp => dp.group.slice(-4) !== 'last');\n    const timeCutoff = getTimeWindowLeftEdge();\n    // remove data points outside time window (because alert query filters on firstOcc >= cutoff OR lastOcc >= cutoff)\n    const filteredDate = filteredLast.filter(dp => dp.date >= timeCutoff);\n    return filteredDate;\n  };\n\n  // we want alerts that have a first occurrence within window or a last occurrence within window\n  const getQueryFilter = filter => {\n    const timeCutoff = getTimeWindowLeftEdge();\n    const firstOccFilter = `firstOccurrenceTime >= '${timeCutoff}'`;\n    const lastOccFilter = `lastOccurrenceTime >= '${timeCutoff}'`;\n    return filter + ` and (${firstOccFilter} or ${lastOccFilter})`;\n  };\n  const getUrlFilter = datum => {\n    const windowLeftEdge = typeof datum.date === 'string' ? new Date(datum.date) : datum.date;\n    let windowRightEdge;\n    if (timeWindowRef.current === '15Min') {\n      // aggregate by minute so add one minute\n      windowRightEdge = new Date(windowLeftEdge.getTime() + 60 * 1000);\n    } else {\n      // aggregate by hour so add one hour\n      windowRightEdge = new Date(windowLeftEdge.getTime() + 60 * 60 * 1000);\n    }\n    const occType = datum.group.slice(-5) === 'first' ? 'firstOccurrenceTime' : 'lastOccurrenceTime';\n    const filterTemplate = `state != 'clear' and ${occType} >= '${windowLeftEdge.toISOString()}' and ${occType} < '${windowRightEdge.toISOString()}'`;\n    const [name, id] = datum.group.split('_');\n    const filterWithApplication = ['AllApplications', 'None'].includes(name) ? filterTemplate : filterTemplate + ` and insights.id = '${id}'`;\n    return filterWithApplication;\n  };\n\n  // we refetch data everytime we click refresh OR change time window. we don't refresh for occurrence type change but we do refilter\n  const getAlertOptions = () => {\n    return /*#__PURE__*/react.createElement(\"div\", {\n      className: `${className}-options`\n    }, /*#__PURE__*/react.createElement(\"div\", {\n      className: `${className}-options-firstrow`\n    }, /*#__PURE__*/react.createElement(es/* Dropdown */.msM, {\n      id: \"timewindow-dropdown\",\n      label: \"Time window\",\n      items: Object.keys(constants/* DROPDOWN_ITEMS */.Rd),\n      itemToString: item => constants/* DROPDOWN_ITEMS */.Rd[item],\n      selectedItem: timeWindow,\n      onChange: e => {\n        setTimeWindow(e.selectedItem);\n        timeWindowRef.current = e.selectedItem;\n      },\n      titleText: '',\n      type: \"inline\"\n    }), /*#__PURE__*/react.createElement(es/* Checkbox */.Sc0, {\n      labelText: \"First occurrence\",\n      id: \"first-occur-chkbox\",\n      checked: useFirstOccurrence,\n      onChange: (e, _ref) => {\n        let {\n          checked\n        } = _ref;\n        return setUseFirstOccurrence(checked);\n      }\n    }), /*#__PURE__*/react.createElement(es/* Checkbox */.Sc0, {\n      labelText: \"Last occurrence\",\n      id: \"last-occur-chkbox\",\n      checked: useLastOccurrence,\n      onChange: (e, _ref2) => {\n        let {\n          checked\n        } = _ref2;\n        return setUseLastOccurrence(checked);\n      }\n    })), /*#__PURE__*/react.createElement(es/* Button */.$nd, {\n      className: `${className}__reset`,\n      disabled: loading,\n      kind: \"ghost\",\n      onClick: () => onPointClick('')\n    }, \"Reset filter\"));\n  };\n  (0,react.useEffect)(() => {\n    const onRefresh = e => {\n      if (e.data === 'alertsrefresh' && e.origin === state.clientConfiguration.publicurl) {\n        fetchAlerts({\n          filter: getQueryFilter(constants/* ALERT_QUERY_PARAMS */.vb.filter)\n        });\n      }\n    };\n    window.addEventListener('message', onRefresh, false);\n    chartRef.current?.chart.services.events.addEventListener('heatmap-click', e => {\n      onPointClick(getUrlFilter(e.detail.datum));\n    });\n    fetchAlerts({\n      filter: getQueryFilter(constants/* ALERT_QUERY_PARAMS */.vb.filter)\n    });\n    return () => window.removeEventListener('message', onRefresh);\n  }, []);\n  (0,react.useEffect)(() => {\n    fetchAlerts({\n      filter: getQueryFilter(constants/* ALERT_QUERY_PARAMS */.vb.filter)\n    });\n  }, [timeWindow]);\n  const options = {\n    axes: {\n      bottom: {\n        title: 'Date',\n        mapsTo: 'date',\n        scaleType: dist/* ScaleTypes */.Wh.LABELS,\n        visible: false\n      },\n      left: {\n        title: 'Application',\n        mapsTo: 'group',\n        scaleType: dist/* ScaleTypes */.Wh.LABELS\n      }\n    },\n    heatmap: {\n      colorLegend: {\n        title: 'Heat gradient'\n      }\n    },\n    experimental: true,\n    data: {\n      loading\n    },\n    height: '300px'\n  };\n  return /*#__PURE__*/react.createElement(\"div\", {\n    className: className,\n    role: \"contentinfo\"\n  }, /*#__PURE__*/react.createElement(\"div\", {\n    className: `${className}__heading`\n  }, title), /*#__PURE__*/react.createElement(\"div\", {\n    className: `${className}__chart`\n  }, getAlertOptions(), /*#__PURE__*/react.createElement(dist/* HeatmapChart */.dM, {\n    data: getFilteredFirstLast(alertCountGroups),\n    options: options,\n    ref: chartRef\n  })));\n};\n/* harmony default export */ var heatmap_Heatmap = (Heatmap);\n// EXTERNAL MODULE: ./src/mocks/alerts.json\nvar alerts = __webpack_require__(6862);\n;// ./src/components/heatmap/Heatmap.stories.tsx\nfunction _extends() {\n  return _extends = Object.assign ? Object.assign.bind() : function (n) {\n    for (var e = 1; e < arguments.length; e++) {\n      var t = arguments[e];\n      for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]);\n    }\n    return n;\n  }, _extends.apply(null, arguments);\n}\n/**\n * © Copyright IBM Corp. 2022, 2025\n * SPDX-License-Identifier: Apache-2.0\n */\n\n\n\n\n/* harmony default export */ var Heatmap_stories = ({\n  title: 'Application heatmap',\n  component: heatmap_Heatmap,\n  argTypes: {\n    data: {\n      control: 'object'\n    }\n  }\n});\nconst Template = args => /*#__PURE__*/react.createElement(heatmap_Heatmap, _extends({}, args, {\n  refetch: () => {}\n}));\nconst Default = Template.bind({});\nDefault.args = {\n  data: alerts/* data */.p\n};\nconst Skeleton = () => {\n  return /*#__PURE__*/react.createElement(\"div\", {\n    style: {\n      border: '1px solid #E0E0E0'\n    }\n  }, /*#__PURE__*/react.createElement(heatmap_Heatmap, {\n    loading: true,\n    refetch: () => {}\n  }));\n};\nDefault.parameters = {\n  ...Default.parameters,\n  docs: {\n    ...Default.parameters?.docs,\n    source: {\n      originalSource: \"(args: {\\n  data: {};\\n}) => <Heatmap {...args} refetch={() => {}} />\",\n      ...Default.parameters?.docs?.source\n    }\n  }\n};\nSkeleton.parameters = {\n  ...Skeleton.parameters,\n  docs: {\n    ...Skeleton.parameters?.docs,\n    source: {\n      originalSource: \"() => {\\n  return <div style={{\\n    border: '1px solid #E0E0E0'\\n  }}>\\n      <Heatmap loading={true} refetch={() => {}} />\\n    </div>;\\n}\",\n      ...Skeleton.parameters?.docs?.source\n    }\n  }\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LFVBQUEsRUFBQUMsSUFBQSxFQUFBQztJQUFBO0VBQUE7QUFBQSIsInNvdXJjZXMiOlsid2VicGFjazovL0BpYm0vYWlvcHMtdWktZXh0ZW5zaW9uLXRlbXBsYXRlLy4vc3JjL2hlbHBlcnMvZ2V0VGltZUdyb3VwQ291bnRzQnlBcHAudHM/ZWIxNSIsIndlYnBhY2s6Ly9AaWJtL2Fpb3BzLXVpLWV4dGVuc2lvbi10ZW1wbGF0ZS8uL3NyYy9jb21wb25lbnRzL2hlYXRtYXAvaGVhdG1hcC5zY3NzP2ZkNWIiLCJ3ZWJwYWNrOi8vQGlibS9haW9wcy11aS1leHRlbnNpb24tdGVtcGxhdGUvLi9zcmMvY29tcG9uZW50cy9oZWF0bWFwL0hlYXRtYXAudHN4PzU5N2UiLCJ3ZWJwYWNrOi8vQGlibS9haW9wcy11aS1leHRlbnNpb24tdGVtcGxhdGUvLi9zcmMvY29tcG9uZW50cy9oZWF0bWFwL0hlYXRtYXAuc3Rvcmllcy50c3g/ZTJkZiJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIMKpIENvcHlyaWdodCBJQk0gQ29ycC4gMjAyMiwgMjAyNVxuICogU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEFwYWNoZS0yLjBcbiAqL1xuXG5pbXBvcnQge1xuICBBTEVSVF9RVUVSWV9QQVJBTVMsXG4gIEFMTF9BUFBTX0ZJUlNUX09DQyxcbiAgQUxMX0FQUFNfTEFTVF9PQ0Ncbn0gZnJvbSAnLi4vY29tcG9uZW50cy9jb25zdGFudHMnO1xuXG50eXBlIEFsZXJ0c0J5QXBwID0ge1xuICBbZ3JvdXBLZXk6IHN0cmluZ106IHtcbiAgICBbZGF0ZTogc3RyaW5nXSA6IG51bWJlclxuICB9XG59O1xuXG50eXBlIEFsZXJ0Q291bnREYXRhUG9pbnQgPSB7XG4gIGdyb3VwOiBzdHJpbmcsXG4gIGRhdGU6IHN0cmluZyxcbiAgdmFsdWU6IG51bWJlclxufVxuXG50eXBlIEluc2lnaHQgPSB7XG4gIGlkPzogc3RyaW5nLFxuICBkZXRhaWxzPzoge1xuICAgIG5hbWU6IHN0cmluZ1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGdldEFsZXJ0Q291bnRHcm91cHMoYWxlcnRzOiBBcnJheTx7ZmllbGRzOiB7W2tleTogc3RyaW5nXTogc3RyaW5nfX0+LCB0aW1lV2luZG93OiBzdHJpbmcpIHtcbiAgY29uc3QgYWxlcnRzQnlBcHAgOiBBbGVydHNCeUFwcCA9IHtcbiAgICBBTExfQVBQU19GSVJTVF9PQ0M6IHt9LFxuICAgIEFMTF9BUFBTX0xBU1RfT0NDOiB7fVxuICB9O1xuXG4gIGNvbnN0IGFsZXJ0Q291bnREYXRhOiBBbGVydENvdW50RGF0YVBvaW50W10gPSBbXTtcblxuICBjb25zdCBjaG9wT2NjdXJyZW5jZSA9IChvY2M6IHN0cmluZykgPT4ge1xuICAgIC8vIGFnZ3JlZ2F0ZSBieSBtaW51dGVcbiAgICBpZiAodGltZVdpbmRvdyA9PT0gJzE1TWluJykgcmV0dXJuIG9jYy5zbGljZSgwLCAtNykgKyAnMDAuMDAwWidcbiAgICAvLyBhZ2dyZWdhdGUgYnkgaG91clxuICAgIHJldHVybiBvY2Muc2xpY2UoMCwgLTEwKSArICcwMDowMC4wMDBaJ1xuICB9XG5cbiAgYWxlcnRzPy5mb3JFYWNoKGFsZXJ0Um93ID0+IHtcbiAgICBjb25zdCBhcHBsaWNhdGlvblN0cmluZyA9IGFsZXJ0Um93LmZpZWxkc1tBTEVSVF9RVUVSWV9QQVJBTVMuY29sdW1ucy5pbmRleE9mKCdAaW5zaWdodHMudHlwZT1cXCdhaW9wcy5pYm0uY29tL2luc2lnaHQtdHlwZS90b3BvbG9neS9ncm91cFxcJycpXTtcbiAgICBsZXQgYXBwbGljYXRpb246IEluc2lnaHQgPSB7IGlkOiBudWxsLCBkZXRhaWxzOiB7IG5hbWU6IG51bGwgfSB9O1xuICAgIGlmIChhcHBsaWNhdGlvblN0cmluZykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgYXBwbGljYXRpb24gPSBKU09OLnBhcnNlKGFwcGxpY2F0aW9uU3RyaW5nKVswXTtcbiAgICAgIH0gY2F0Y2gge1xuICAgICAgICAvLyBpZ25vcmVcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBmaXJzdE9jY3VycmVuY2VVbmNob3BwZWQgOiBzdHJpbmcgPSBhbGVydFJvdy5maWVsZHNbQUxFUlRfUVVFUllfUEFSQU1TLmNvbHVtbnMuaW5kZXhPZignZmlyc3RPY2N1cnJlbmNlVGltZScpXTtcbiAgICBjb25zdCBsYXN0T2NjdXJyZW5jZVVuY2hvcHBlZCA6IHN0cmluZyA9IGFsZXJ0Um93LmZpZWxkc1tBTEVSVF9RVUVSWV9QQVJBTVMuY29sdW1ucy5pbmRleE9mKCdsYXN0T2NjdXJyZW5jZVRpbWUnKV07XG5cbiAgICAvLyBwcmVwYXJlIGRhdGEgZm9yIGFnZ3JlZ2F0aW9uIGJ5IG1pbnV0ZXMgb3IgaG91cnNcbiAgICBjb25zdCBmaXJzdE9jY3VycmVuY2UgPSBjaG9wT2NjdXJyZW5jZShmaXJzdE9jY3VycmVuY2VVbmNob3BwZWQpO1xuICAgIGNvbnN0IGxhc3RPY2N1cnJlbmNlID0gY2hvcE9jY3VycmVuY2UobGFzdE9jY3VycmVuY2VVbmNob3BwZWQpO1xuXG5cbiAgICAvLyBkYXRhIGdyb3VwIG5hbWVzIGFzIHNlZW4gaW4gbW9kZWxcbiAgICBjb25zdCB7IGlkLCBkZXRhaWxzOiB7IG5hbWUgfSB9ID0gYXBwbGljYXRpb247XG4gICAgY29uc3QgZmlyc3RHcm91cEtleSA9IChuYW1lIHx8ICdOb25lJykgKyAnXycgKyBpZCArICdfZmlyc3QnO1xuICAgIGNvbnN0IGxhc3RHcm91cEtleSA9IChuYW1lIHx8ICdOb25lJykgKyAnXycgKyBpZCAgKyAnX2xhc3QnO1xuXG4gICAgLy8gaW5pdGlhbGl6ZSBvYmogaWYgbmVjZXNzYXJ5XG4gICAgaWYgKCFhbGVydHNCeUFwcFtmaXJzdEdyb3VwS2V5XT8uW2ZpcnN0T2NjdXJyZW5jZV0pIGFsZXJ0c0J5QXBwW2ZpcnN0R3JvdXBLZXldID0gey4uLmFsZXJ0c0J5QXBwW2ZpcnN0R3JvdXBLZXldLCBbZmlyc3RPY2N1cnJlbmNlXTogMH07XG4gICAgaWYgKCFhbGVydHNCeUFwcFtsYXN0R3JvdXBLZXldPy5bbGFzdE9jY3VycmVuY2VdKSBhbGVydHNCeUFwcFtsYXN0R3JvdXBLZXldID0gey4uLmFsZXJ0c0J5QXBwW2xhc3RHcm91cEtleV0sIFtsYXN0T2NjdXJyZW5jZV06IDB9O1xuICAgIGlmICghYWxlcnRzQnlBcHBbQUxMX0FQUFNfRklSU1RfT0NDXT8uW2ZpcnN0T2NjdXJyZW5jZV0pIGFsZXJ0c0J5QXBwW0FMTF9BUFBTX0ZJUlNUX09DQ10gPSB7Li4uYWxlcnRzQnlBcHBbQUxMX0FQUFNfRklSU1RfT0NDXSwgW2ZpcnN0T2NjdXJyZW5jZV06IDB9O1xuICAgIGlmICghYWxlcnRzQnlBcHBbQUxMX0FQUFNfTEFTVF9PQ0NdPy5bbGFzdE9jY3VycmVuY2VdKSBhbGVydHNCeUFwcFtBTExfQVBQU19MQVNUX09DQ10gPSB7Li4uYWxlcnRzQnlBcHBbQUxMX0FQUFNfTEFTVF9PQ0NdLCBbbGFzdE9jY3VycmVuY2VdOiAwfTtcblxuICAgIC8vIGluY3JlbWVudCBhbGVydCBjb3VudCBmb3IgdGhhdCBhcHBsaWNhdGlvbiArIG9jY3VycmVuY2VcbiAgICBhbGVydHNCeUFwcFtmaXJzdEdyb3VwS2V5XVtmaXJzdE9jY3VycmVuY2VdKys7XG4gICAgYWxlcnRzQnlBcHBbbGFzdEdyb3VwS2V5XVtsYXN0T2NjdXJyZW5jZV0rKztcblxuICAgIC8vIGluY3JlbWVudCBhbGVydCBjb3VudCBmb3IgdGhhdCBvY2N1cnJlbmNlIG92ZXIgYWxsIGFwcHNcbiAgICBhbGVydHNCeUFwcFtBTExfQVBQU19GSVJTVF9PQ0NdW2ZpcnN0T2NjdXJyZW5jZV0rKztcbiAgICBhbGVydHNCeUFwcFtBTExfQVBQU19MQVNUX09DQ11bbGFzdE9jY3VycmVuY2VdKys7XG4gIH0pO1xuXG4gIGZvciAoY29uc3QgZ3JvdXBLZXkgaW4gYWxlcnRzQnlBcHApIHtcbiAgICBmb3IgKGNvbnN0IGRhdGUgb2YgT2JqZWN0LmtleXMoYWxlcnRzQnlBcHBbZ3JvdXBLZXldKS5zb3J0KCkpIHtcbiAgICAgIGFsZXJ0Q291bnREYXRhLnB1c2goXG4gICAgICAgIHtcbiAgICAgICAgICBncm91cDogZ3JvdXBLZXksXG4gICAgICAgICAgZGF0ZTogZGF0ZSxcbiAgICAgICAgICB2YWx1ZTogYWxlcnRzQnlBcHBbZ3JvdXBLZXldW2RhdGVdXG4gICAgICAgIH1cbiAgICAgIClcbiAgICB9XG4gIH1cblxuICByZXR1cm4gYWxlcnRDb3VudERhdGE7XG59XG4iLCJcbiAgICAgIGltcG9ydCBBUEkgZnJvbSBcIiEuLi8uLi8uLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbmplY3RTdHlsZXNJbnRvU3R5bGVUYWcuanNcIjtcbiAgICAgIGltcG9ydCBkb21BUEkgZnJvbSBcIiEuLi8uLi8uLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9zdHlsZURvbUFQSS5qc1wiO1xuICAgICAgaW1wb3J0IGluc2VydEZuIGZyb20gXCIhLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvaW5zZXJ0QnlTZWxlY3Rvci5qc1wiO1xuICAgICAgaW1wb3J0IHNldEF0dHJpYnV0ZXMgZnJvbSBcIiEuLi8uLi8uLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9zZXRBdHRyaWJ1dGVzV2l0aG91dEF0dHJpYnV0ZXMuanNcIjtcbiAgICAgIGltcG9ydCBpbnNlcnRTdHlsZUVsZW1lbnQgZnJvbSBcIiEuLi8uLi8uLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbnNlcnRTdHlsZUVsZW1lbnQuanNcIjtcbiAgICAgIGltcG9ydCBzdHlsZVRhZ1RyYW5zZm9ybUZuIGZyb20gXCIhLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvc3R5bGVUYWdUcmFuc2Zvcm0uanNcIjtcbiAgICAgIGltcG9ydCBjb250ZW50LCAqIGFzIG5hbWVkRXhwb3J0IGZyb20gXCIhIS4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvY2pzLmpzIS4uLy4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9kaXN0L2Nqcy5qcz8/cnVsZVNldFsxXS5ydWxlc1syXS51c2VbMl0hLi9oZWF0bWFwLnNjc3NcIjtcbiAgICAgIFxuICAgICAgXG5cbnZhciBvcHRpb25zID0ge307XG5cbm9wdGlvbnMuc3R5bGVUYWdUcmFuc2Zvcm0gPSBzdHlsZVRhZ1RyYW5zZm9ybUZuO1xub3B0aW9ucy5zZXRBdHRyaWJ1dGVzID0gc2V0QXR0cmlidXRlcztcblxuICAgICAgb3B0aW9ucy5pbnNlcnQgPSBpbnNlcnRGbi5iaW5kKG51bGwsIFwiaGVhZFwiKTtcbiAgICBcbm9wdGlvbnMuZG9tQVBJID0gZG9tQVBJO1xub3B0aW9ucy5pbnNlcnRTdHlsZUVsZW1lbnQgPSBpbnNlcnRTdHlsZUVsZW1lbnQ7XG5cbnZhciB1cGRhdGUgPSBBUEkoY29udGVudCwgb3B0aW9ucyk7XG5cblxuXG5leHBvcnQgKiBmcm9tIFwiISEuLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L2Nqcy5qcyEuLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvZGlzdC9janMuanM/P3J1bGVTZXRbMV0ucnVsZXNbMl0udXNlWzJdIS4vaGVhdG1hcC5zY3NzXCI7XG4gICAgICAgZXhwb3J0IGRlZmF1bHQgY29udGVudCAmJiBjb250ZW50LmxvY2FscyA/IGNvbnRlbnQubG9jYWxzIDogdW5kZWZpbmVkO1xuIiwiLyoqXG4gKiDCqSBDb3B5cmlnaHQgSUJNIENvcnAuIDIwMjIsIDIwMjVcbiAqIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBBcGFjaGUtMi4wXG4gKi9cblxuaW1wb3J0IFJlYWN0LCB7IHVzZUVmZmVjdCwgdXNlTWVtbywgdXNlU3RhdGUsIHVzZVJlZiB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCBSZWFjdERPTSBmcm9tICdyZWFjdC1kb20vY2xpZW50JztcbmltcG9ydCB7IEJ1dHRvbiwgQ2hlY2tib3gsIERyb3Bkb3dufSBmcm9tICdAY2FyYm9uL3JlYWN0Jztcbi8vIEB0cy1pZ25vcmVcbmltcG9ydCB7IEhlYXRtYXBDaGFydCwgU2NhbGVUeXBlcyB9IGZyb20gJ0BjYXJib24vY2hhcnRzLXJlYWN0JztcbmltcG9ydCB7XG4gIEFMRVJUX1FVRVJZX1BBUkFNUyxcbiAgRFJPUERPV05fSVRFTVNcbn0gZnJvbSAnLi4vY29uc3RhbnRzJztcbmltcG9ydCBnZXRUaW1lR3JvdXBDb3VudHMgZnJvbSAnLi4vLi4vaGVscGVycy9nZXRUaW1lR3JvdXBDb3VudHNCeUFwcCc7XG5cbmltcG9ydCAnLi9oZWF0bWFwLnNjc3MnO1xuXG4vLyBAdHMtaWdub3JlXG5pbXBvcnQgZ2V0UmVhY3RSZW5kZXJlciBmcm9tICdAaWJtL2Frb3JhLXJlbmRlcmVyLXJlYWN0JztcblxuY29uc3QgUmVhY3RSZW5kZXJlciA9IGdldFJlYWN0UmVuZGVyZXIoUmVhY3QsIFJlYWN0RE9NKTtcbmNvbnN0IHsgdXNlQWtvcmFTdGF0ZSwgc2V0VXJsUGFyYW1ldGVycyB9ID0gUmVhY3RSZW5kZXJlci5jb21wb25lbnRzO1xuXG5jb25zdCBjbGFzc05hbWUgPSAnaGVhdG1hcCc7XG5cbnR5cGUgQWxlcnRDb3VudERhdGFQb2ludCA9IHtcbiAgZ3JvdXA6IHN0cmluZyxcbiAgZGF0ZTogc3RyaW5nLFxuICB2YWx1ZTogbnVtYmVyXG59XG5cbnR5cGUgQ2hhcnREYXRhUG9pbnQgPSB7XG4gIGRhdGU6IERhdGUsXG4gIGdyb3VwOiBzdHJpbmcsXG4gIHZhbHVlOiBudW1iZXJcbn1cblxuXG5jb25zdCBIZWF0bWFwID0gKHByb3BzOiBhbnkpID0+IHtcbiAgY29uc3Qge1xuICAgIGRhdGEsXG4gICAgbG9hZGluZyxcbiAgICByZWZldGNoOiBmZXRjaEFsZXJ0c1xuICB9ID0gcHJvcHM7XG4gIGNvbnN0IGFsZXJ0cyA9IGRhdGE/LnRlbmFudC5hbGVydHMucm93cztcblxuICBjb25zdCB7IHN0YXRlLCBhcHAgfSA9IHVzZUFrb3JhU3RhdGUoKTtcbiAgY29uc3QgY2hhcnRSZWYgPSB1c2VSZWYobnVsbCk7XG4gIGNvbnN0IFt1c2VGaXJzdE9jY3VycmVuY2UsIHNldFVzZUZpcnN0T2NjdXJyZW5jZV0gPSB1c2VTdGF0ZSh0cnVlKTtcbiAgY29uc3QgW3VzZUxhc3RPY2N1cnJlbmNlLCBzZXRVc2VMYXN0T2NjdXJyZW5jZV0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIC8vIHdlIHdhbnQgdG8gcmVyZW5kZXIgd2hlbiB0aW1ld2luZG93IHVwZGF0ZXMgYnV0IHdlIGFsc28gd2FudCB0byB1c2UgaXQgaW4gZXZlbnQgbGlzdGVuZXIgc28gd2UgbmVlZCByZWYgKyBzdGF0ZSBtZ210XG4gIGNvbnN0IFt0aW1lV2luZG93LCBzZXRUaW1lV2luZG93XSA9IHVzZVN0YXRlKCcxNU1pbicpO1xuICBjb25zdCB0aW1lV2luZG93UmVmID0gdXNlUmVmKCcxNU1pbicpO1xuICBjb25zdCB0YXJnZXRVcmwgPSBhcHAucmVzb2x2ZVBhdGhFeHByZXNzaW9uKHN0YXRlLnBhdGgpO1xuICBjb25zdCB7IHRpdGxlIH0gPSBhcHAuZ2V0U3RhdGVGb3JQYXRoKHRhcmdldFVybCk7XG4gIGNvbnN0IGFsZXJ0Q291bnRHcm91cHMgPSB1c2VNZW1vKCgpID0+IGdldFRpbWVHcm91cENvdW50cyhhbGVydHMsIHRpbWVXaW5kb3cpLCBbYWxlcnRzLCB0aW1lV2luZG93XSk7XG5cbiAgY29uc3QgZ2V0VGltZVdpbmRvd0xlZnRFZGdlID0gKCkgPT4ge1xuICAgIC8vIHJlcGxhY2Ugd2l0aCBsaW5lIGJlbG93IGZvciBhY2N1cmF0ZSBjaGFydCAodGhpcyBkYXRlIGlzIGZvciBleGFtcGxlIHB1cnBvc2VzKVxuICAgIGNvbnN0IHRocmVzaG9sZCA9IG5ldyBEYXRlKCcyMDIzLTA4LTIyVDE2OjQ5OjAwLjAwMFonKVxuICAgIC8vIGNvbnN0IHRocmVzaG9sZCA9IG5ldyBEYXRlKCk7IC8vIHRvZG8gY2hhbmdlIHRvIGRhdGUgbm93XG4gICAgbGV0IGRhdGVUaHJlc2g7XG4gICAgLy8gd2luZG93IGlzIGVpdGhlciBsYXN0IDE1IG1pbiBvciBsYXN0IDI0IGhvdXJzXG4gICAgaWYgKHRpbWVXaW5kb3cgPT09ICcxNU1pbicpIHtcbiAgICAgIGRhdGVUaHJlc2ggPSB0aHJlc2hvbGQ7XG4gICAgICBkYXRlVGhyZXNoLnNldE1pbnV0ZXModGhyZXNob2xkLmdldE1pbnV0ZXMoKSAtIDE1KTtcbiAgICB9IGVsc2Uge1xuICAgICAgZGF0ZVRocmVzaCA9IG5ldyBEYXRlKHRocmVzaG9sZC5nZXRUaW1lKCkgLSAoMjQgKiA2MCAqIDYwICogMTAwMCkpO1xuICAgIH1cbiAgICByZXR1cm4gZGF0ZVRocmVzaC50b0lTT1N0cmluZygpO1xuICB9XG5cbiAgY29uc3Qgb25Qb2ludENsaWNrID0gKGZpbHRlclN0cjogc3RyaW5nKSA9PiB7XG4gICAgY29uc3QgbmV3Um91dGUgPSBzZXRVcmxQYXJhbWV0ZXJzKHN0YXRlPy5yZXNvbHZlZEZ1bGxQYXRoIHx8IHN0YXRlPy5mdWxsUGF0aCwgeyBmaWx0ZXJuYW1lOiAnQWxsIGFsZXJ0cycsIGZpbHRlcndoZXJlY2xhdXNlOiBmaWx0ZXJTdHIgfSk7XG4gICAgYXBwLnJlcGxhY2VSb3V0ZShuZXdSb3V0ZSk7XG4gIH1cblxuICBjb25zdCBnZXRGaWx0ZXJlZEZpcnN0TGFzdCA9IChhbGVydENvdW50OiBBbGVydENvdW50RGF0YVBvaW50W10pID0+IHtcbiAgICAvLyBmaWx0ZXIgb3V0IGZpcnN0IG9jY3VycmVuY2UgZGF0YSBwb2ludHMgaWYgbmVjZXNzYXJ5XG4gICAgY29uc3QgZmlsdGVyZWRGaXJzdCA9IHVzZUZpcnN0T2NjdXJyZW5jZSA/IGFsZXJ0Q291bnQgOiBhbGVydENvdW50LmZpbHRlcigoZHApID0+IGRwLmdyb3VwLnNsaWNlKC01KSAhPT0gJ2ZpcnN0JylcbiAgICAvLyBmaWx0ZXIgb3V0IGxhc3Qgb2NjdXJyZW5jZSBkYXRhIHBvaW50cyBpZiBuZWNlc3NhcnlcbiAgICBjb25zdCBmaWx0ZXJlZExhc3QgPSB1c2VMYXN0T2NjdXJyZW5jZSA/IGZpbHRlcmVkRmlyc3QgOiBmaWx0ZXJlZEZpcnN0LmZpbHRlcigoZHApID0+IGRwLmdyb3VwLnNsaWNlKC00KSAhPT0gJ2xhc3QnKVxuICAgIGNvbnN0IHRpbWVDdXRvZmYgPSBnZXRUaW1lV2luZG93TGVmdEVkZ2UoKTtcbiAgICAvLyByZW1vdmUgZGF0YSBwb2ludHMgb3V0c2lkZSB0aW1lIHdpbmRvdyAoYmVjYXVzZSBhbGVydCBxdWVyeSBmaWx0ZXJzIG9uIGZpcnN0T2NjID49IGN1dG9mZiBPUiBsYXN0T2NjID49IGN1dG9mZilcbiAgICBjb25zdCBmaWx0ZXJlZERhdGUgPSBmaWx0ZXJlZExhc3QuZmlsdGVyKChkcCkgPT4gZHAuZGF0ZSA+PSB0aW1lQ3V0b2ZmKTtcbiAgICByZXR1cm4gZmlsdGVyZWREYXRlO1xuICB9XG5cbiAgLy8gd2Ugd2FudCBhbGVydHMgdGhhdCBoYXZlIGEgZmlyc3Qgb2NjdXJyZW5jZSB3aXRoaW4gd2luZG93IG9yIGEgbGFzdCBvY2N1cnJlbmNlIHdpdGhpbiB3aW5kb3dcbiAgY29uc3QgZ2V0UXVlcnlGaWx0ZXIgPSAoZmlsdGVyOiBzdHJpbmcpID0+IHtcbiAgICBjb25zdCB0aW1lQ3V0b2ZmID0gZ2V0VGltZVdpbmRvd0xlZnRFZGdlKCk7XG4gICAgY29uc3QgZmlyc3RPY2NGaWx0ZXIgPSBgZmlyc3RPY2N1cnJlbmNlVGltZSA+PSAnJHt0aW1lQ3V0b2ZmfSdgO1xuICAgIGNvbnN0IGxhc3RPY2NGaWx0ZXIgPSBgbGFzdE9jY3VycmVuY2VUaW1lID49ICcke3RpbWVDdXRvZmZ9J2A7XG4gICAgcmV0dXJuIGZpbHRlciArIGAgYW5kICgke2ZpcnN0T2NjRmlsdGVyfSBvciAke2xhc3RPY2NGaWx0ZXJ9KWBcbiAgfVxuXG4gIGNvbnN0IGdldFVybEZpbHRlciA9IChkYXR1bTogQ2hhcnREYXRhUG9pbnQpID0+IHtcbiAgICBjb25zdCB3aW5kb3dMZWZ0RWRnZSA9IHR5cGVvZiBkYXR1bS5kYXRlID09PSAnc3RyaW5nJyA/IG5ldyBEYXRlKGRhdHVtLmRhdGUpIDogZGF0dW0uZGF0ZTtcbiAgICBsZXQgd2luZG93UmlnaHRFZGdlO1xuICAgIGlmICh0aW1lV2luZG93UmVmLmN1cnJlbnQgPT09ICcxNU1pbicpIHtcbiAgICAgIC8vIGFnZ3JlZ2F0ZSBieSBtaW51dGUgc28gYWRkIG9uZSBtaW51dGVcbiAgICAgIHdpbmRvd1JpZ2h0RWRnZSA9IG5ldyBEYXRlKHdpbmRvd0xlZnRFZGdlLmdldFRpbWUoKSArIDYwICogMTAwMCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIGFnZ3JlZ2F0ZSBieSBob3VyIHNvIGFkZCBvbmUgaG91clxuICAgICAgd2luZG93UmlnaHRFZGdlID0gbmV3IERhdGUod2luZG93TGVmdEVkZ2UuZ2V0VGltZSgpICsgNjAgKiA2MCAqIDEwMDApO1xuICAgIH1cbiAgICBjb25zdCBvY2NUeXBlID0gZGF0dW0uZ3JvdXAuc2xpY2UoLTUpID09PSAnZmlyc3QnID8gJ2ZpcnN0T2NjdXJyZW5jZVRpbWUnIDogJ2xhc3RPY2N1cnJlbmNlVGltZSc7XG4gICAgY29uc3QgZmlsdGVyVGVtcGxhdGUgPSBgc3RhdGUgIT0gJ2NsZWFyJyBhbmQgJHtvY2NUeXBlfSA+PSAnJHt3aW5kb3dMZWZ0RWRnZS50b0lTT1N0cmluZygpfScgYW5kICR7b2NjVHlwZX0gPCAnJHt3aW5kb3dSaWdodEVkZ2UudG9JU09TdHJpbmcoKX0nYFxuICAgIGNvbnN0IFtuYW1lLCBpZF0gPSBkYXR1bS5ncm91cC5zcGxpdCgnXycpO1xuICAgIGNvbnN0IGZpbHRlcldpdGhBcHBsaWNhdGlvbiA9IFsnQWxsQXBwbGljYXRpb25zJywgJ05vbmUnXS5pbmNsdWRlcyhuYW1lKSA/IGZpbHRlclRlbXBsYXRlIDogKGZpbHRlclRlbXBsYXRlICsgYCBhbmQgaW5zaWdodHMuaWQgPSAnJHtpZH0nYCk7XG4gICAgcmV0dXJuIGZpbHRlcldpdGhBcHBsaWNhdGlvbjtcbiAgfVxuXG4gIC8vIHdlIHJlZmV0Y2ggZGF0YSBldmVyeXRpbWUgd2UgY2xpY2sgcmVmcmVzaCBPUiBjaGFuZ2UgdGltZSB3aW5kb3cuIHdlIGRvbid0IHJlZnJlc2ggZm9yIG9jY3VycmVuY2UgdHlwZSBjaGFuZ2UgYnV0IHdlIGRvIHJlZmlsdGVyXG4gIGNvbnN0IGdldEFsZXJ0T3B0aW9ucyA9ICgpID0+IHtcbiAgICByZXR1cm4gKFxuICAgICAgPGRpdiBjbGFzc05hbWU9e2Ake2NsYXNzTmFtZX0tb3B0aW9uc2B9PlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT17YCR7Y2xhc3NOYW1lfS1vcHRpb25zLWZpcnN0cm93YH0+XG4gICAgICAgICAgPERyb3Bkb3duXG4gICAgICAgICAgICBpZD0ndGltZXdpbmRvdy1kcm9wZG93bidcbiAgICAgICAgICAgIGxhYmVsPSdUaW1lIHdpbmRvdydcbiAgICAgICAgICAgIGl0ZW1zPXtPYmplY3Qua2V5cyhEUk9QRE9XTl9JVEVNUyl9IGl0ZW1Ub1N0cmluZz17KGl0ZW0pID0+IERST1BET1dOX0lURU1TW2l0ZW1dfVxuICAgICAgICAgICAgc2VsZWN0ZWRJdGVtPXt0aW1lV2luZG93fVxuICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7c2V0VGltZVdpbmRvdyhlLnNlbGVjdGVkSXRlbSk7IHRpbWVXaW5kb3dSZWYuY3VycmVudCA9IGUuc2VsZWN0ZWRJdGVtfX1cbiAgICAgICAgICAgIHRpdGxlVGV4dD17Jyd9XG4gICAgICAgICAgICB0eXBlPSdpbmxpbmUnXG4gICAgICAgICAgLz5cbiAgICAgICAgICA8Q2hlY2tib3ggbGFiZWxUZXh0PSdGaXJzdCBvY2N1cnJlbmNlJyBpZD0nZmlyc3Qtb2NjdXItY2hrYm94JyBjaGVja2VkPXt1c2VGaXJzdE9jY3VycmVuY2V9IG9uQ2hhbmdlPXsoZSwge2NoZWNrZWR9KSA9PiBzZXRVc2VGaXJzdE9jY3VycmVuY2UoY2hlY2tlZCl9Lz5cbiAgICAgICAgICA8Q2hlY2tib3ggbGFiZWxUZXh0PSdMYXN0IG9jY3VycmVuY2UnIGlkPSdsYXN0LW9jY3VyLWNoa2JveCcgY2hlY2tlZD17dXNlTGFzdE9jY3VycmVuY2V9IG9uQ2hhbmdlPXsoZSwge2NoZWNrZWR9KSA9PiBzZXRVc2VMYXN0T2NjdXJyZW5jZShjaGVja2VkKX0vPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPEJ1dHRvblxuICAgICAgICAgIGNsYXNzTmFtZT17YCR7Y2xhc3NOYW1lfV9fcmVzZXRgfVxuICAgICAgICAgIGRpc2FibGVkPXtsb2FkaW5nfVxuICAgICAgICAgIGtpbmQ9J2dob3N0J1xuICAgICAgICAgIG9uQ2xpY2s9eygpID0+IG9uUG9pbnRDbGljaygnJyl9PlxuICAgICAgICAgIFJlc2V0IGZpbHRlclxuICAgICAgICA8L0J1dHRvbj5cbiAgICAgIDwvZGl2PlxuICAgIClcbiAgfVxuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3Qgb25SZWZyZXNoID0gKGU6IGFueSkgPT4ge1xuICAgICAgaWYgKGUuZGF0YSA9PT0gJ2FsZXJ0c3JlZnJlc2gnICYmIGUub3JpZ2luID09PSBzdGF0ZS5jbGllbnRDb25maWd1cmF0aW9uLnB1YmxpY3VybCkge1xuICAgICAgICBmZXRjaEFsZXJ0cyh7IGZpbHRlcjogZ2V0UXVlcnlGaWx0ZXIoQUxFUlRfUVVFUllfUEFSQU1TLmZpbHRlcikgfSk7XG4gICAgICB9XG4gICAgfVxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgb25SZWZyZXNoLCBmYWxzZSk7XG4gICAgY2hhcnRSZWYuY3VycmVudD8uY2hhcnQuc2VydmljZXMuZXZlbnRzLmFkZEV2ZW50TGlzdGVuZXIoJ2hlYXRtYXAtY2xpY2snLCAoZSA6IGFueSkgPT4ge1xuICAgICAgb25Qb2ludENsaWNrKGdldFVybEZpbHRlcihlLmRldGFpbC5kYXR1bSkpO1xuICAgIH0pO1xuICAgIGZldGNoQWxlcnRzKHsgZmlsdGVyOiBnZXRRdWVyeUZpbHRlcihBTEVSVF9RVUVSWV9QQVJBTVMuZmlsdGVyKSB9KTtcbiAgICByZXR1cm4gKCkgPT4gd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCBvblJlZnJlc2gpO1xuICB9LCBbXSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBmZXRjaEFsZXJ0cyh7IGZpbHRlcjogZ2V0UXVlcnlGaWx0ZXIoQUxFUlRfUVVFUllfUEFSQU1TLmZpbHRlcikgfSk7XG4gIH0sIFt0aW1lV2luZG93XSk7XG5cbiAgY29uc3Qgb3B0aW9ucyA9IHtcbiAgICBheGVzOiB7XG4gICAgICBib3R0b206IHtcbiAgICAgICAgdGl0bGU6ICdEYXRlJyxcbiAgICAgICAgbWFwc1RvOiAnZGF0ZScsXG4gICAgICAgIHNjYWxlVHlwZTogU2NhbGVUeXBlcy5MQUJFTFMsXG4gICAgICAgIHZpc2libGU6IGZhbHNlXG4gICAgICB9LFxuICAgICAgbGVmdDoge1xuICAgICAgICB0aXRsZTogJ0FwcGxpY2F0aW9uJyxcbiAgICAgICAgbWFwc1RvOiAnZ3JvdXAnLFxuICAgICAgICBzY2FsZVR5cGU6IFNjYWxlVHlwZXMuTEFCRUxTXG4gICAgICB9XG4gICAgfSxcbiAgICBoZWF0bWFwOiB7XG4gICAgICBjb2xvckxlZ2VuZDoge1xuICAgICAgICB0aXRsZTogJ0hlYXQgZ3JhZGllbnQnXG4gICAgICB9XG4gICAgfSxcbiAgICBleHBlcmltZW50YWw6IHRydWUsXG4gICAgZGF0YToge1xuICAgICAgbG9hZGluZ1xuICAgIH0sXG4gICAgaGVpZ2h0OiAnMzAwcHgnXG4gIH07XG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2IGNsYXNzTmFtZT17Y2xhc3NOYW1lfSByb2xlPSdjb250ZW50aW5mbyc+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT17YCR7Y2xhc3NOYW1lfV9faGVhZGluZ2B9PlxuICAgICAgICB7dGl0bGV9XG4gICAgICA8L2Rpdj5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPXtgJHtjbGFzc05hbWV9X19jaGFydGB9PlxuICAgICAgICB7Z2V0QWxlcnRPcHRpb25zKCl9XG4gICAgICAgIDxIZWF0bWFwQ2hhcnRcbiAgICAgICAgICBkYXRhPXtnZXRGaWx0ZXJlZEZpcnN0TGFzdChhbGVydENvdW50R3JvdXBzKX1cbiAgICAgICAgICBvcHRpb25zPXtvcHRpb25zfVxuICAgICAgICAgIHJlZj17Y2hhcnRSZWZ9IC8+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IEhlYXRtYXA7XG4iLCIvKipcbiAqIMKpIENvcHlyaWdodCBJQk0gQ29ycC4gMjAyMiwgMjAyNVxuICogU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEFwYWNoZS0yLjBcbiAqL1xuXG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IEhlYXRtYXAgZnJvbSAnLi9IZWF0bWFwJztcbmltcG9ydCBtb2NrQWxlcnRzIGZyb20gJy4uLy4uL21vY2tzL2FsZXJ0cy5qc29uJztcblxuZXhwb3J0IGRlZmF1bHQge1xuICB0aXRsZTogJ0FwcGxpY2F0aW9uIGhlYXRtYXAnLFxuICBjb21wb25lbnQ6IEhlYXRtYXAsXG4gIGFyZ1R5cGVzOiB7XG4gICAgZGF0YToge1xuICAgICAgY29udHJvbDogJ29iamVjdCdcbiAgICB9XG4gIH1cbn07XG5cbmNvbnN0IFRlbXBsYXRlID0gKGFyZ3M6IHtkYXRhOiB7fX0pID0+IDxIZWF0bWFwIHsuLi5hcmdzfSByZWZldGNoPXsoKSA9PiB7fX0gLz5cblxuZXhwb3J0IGNvbnN0IERlZmF1bHQgPSBUZW1wbGF0ZS5iaW5kKHt9KTtcbkRlZmF1bHQuYXJncyA9IHtcbiAgZGF0YTogbW9ja0FsZXJ0cy5kYXRhXG59O1xuXG5leHBvcnQgY29uc3QgU2tlbGV0b24gPSAoKSA9PiB7XG4gIHJldHVybiAoXG4gICAgPGRpdiBzdHlsZT17e2JvcmRlcjogJzFweCBzb2xpZCAjRTBFMEUwJ319PlxuICAgICAgPEhlYXRtYXAgbG9hZGluZz17dHJ1ZX0gcmVmZXRjaD17KCkgPT4ge319IC8+XG4gICAgPC9kaXY+XG4gICk7XG59O1xuIl0sIm5hbWVzIjpbIkFMRVJUX1FVRVJZX1BBUkFNUyIsIkFMTF9BUFBTX0ZJUlNUX09DQyIsIkFMTF9BUFBTX0xBU1RfT0NDIiwiZ2V0QWxlcnRDb3VudEdyb3VwcyIsImFsZXJ0cyIsInRpbWVXaW5kb3ciLCJhbGVydHNCeUFwcCIsImFsZXJ0Q291bnREYXRhIiwiY2hvcE9jY3VycmVuY2UiLCJvY2MiLCJzbGljZSIsImZvckVhY2giLCJhbGVydFJvdyIsImFwcGxpY2F0aW9uU3RyaW5nIiwiZmllbGRzIiwiY29sdW1ucyIsImluZGV4T2YiLCJhcHBsaWNhdGlvbiIsImlkIiwiZGV0YWlscyIsIm5hbWUiLCJKU09OIiwicGFyc2UiLCJmaXJzdE9jY3VycmVuY2VVbmNob3BwZWQiLCJsYXN0T2NjdXJyZW5jZVVuY2hvcHBlZCIsImZpcnN0T2NjdXJyZW5jZSIsImxhc3RPY2N1cnJlbmNlIiwiZmlyc3RHcm91cEtleSIsImxhc3RHcm91cEtleSIsImdyb3VwS2V5IiwiZGF0ZSIsIk9iamVjdCIsImtleXMiLCJzb3J0IiwicHVzaCIsImdyb3VwIiwidmFsdWUiLCJSZWFjdCIsInVzZUVmZmVjdCIsInVzZU1lbW8iLCJ1c2VTdGF0ZSIsInVzZVJlZiIsIlJlYWN0RE9NIiwiQnV0dG9uIiwiQ2hlY2tib3giLCJEcm9wZG93biIsIkhlYXRtYXBDaGFydCIsIlNjYWxlVHlwZXMiLCJEUk9QRE9XTl9JVEVNUyIsImdldFRpbWVHcm91cENvdW50cyIsImdldFJlYWN0UmVuZGVyZXIiLCJSZWFjdFJlbmRlcmVyIiwidXNlQWtvcmFTdGF0ZSIsInNldFVybFBhcmFtZXRlcnMiLCJjb21wb25lbnRzIiwiY2xhc3NOYW1lIiwiSGVhdG1hcCIsInByb3BzIiwiZGF0YSIsImxvYWRpbmciLCJyZWZldGNoIiwiZmV0Y2hBbGVydHMiLCJ0ZW5hbnQiLCJyb3dzIiwic3RhdGUiLCJhcHAiLCJjaGFydFJlZiIsInVzZUZpcnN0T2NjdXJyZW5jZSIsInNldFVzZUZpcnN0T2NjdXJyZW5jZSIsInVzZUxhc3RPY2N1cnJlbmNlIiwic2V0VXNlTGFzdE9jY3VycmVuY2UiLCJzZXRUaW1lV2luZG93IiwidGltZVdpbmRvd1JlZiIsInRhcmdldFVybCIsInJlc29sdmVQYXRoRXhwcmVzc2lvbiIsInBhdGgiLCJ0aXRsZSIsImdldFN0YXRlRm9yUGF0aCIsImFsZXJ0Q291bnRHcm91cHMiLCJnZXRUaW1lV2luZG93TGVmdEVkZ2UiLCJ0aHJlc2hvbGQiLCJEYXRlIiwiZGF0ZVRocmVzaCIsInNldE1pbnV0ZXMiLCJnZXRNaW51dGVzIiwiZ2V0VGltZSIsInRvSVNPU3RyaW5nIiwib25Qb2ludENsaWNrIiwiZmlsdGVyU3RyIiwibmV3Um91dGUiLCJyZXNvbHZlZEZ1bGxQYXRoIiwiZnVsbFBhdGgiLCJmaWx0ZXJuYW1lIiwiZmlsdGVyd2hlcmVjbGF1c2UiLCJyZXBsYWNlUm91dGUiLCJnZXRGaWx0ZXJlZEZpcnN0TGFzdCIsImFsZXJ0Q291bnQiLCJmaWx0ZXJlZEZpcnN0IiwiZmlsdGVyIiwiZHAiLCJmaWx0ZXJlZExhc3QiLCJ0aW1lQ3V0b2ZmIiwiZmlsdGVyZWREYXRlIiwiZ2V0UXVlcnlGaWx0ZXIiLCJmaXJzdE9jY0ZpbHRlciIsImxhc3RPY2NGaWx0ZXIiLCJnZXRVcmxGaWx0ZXIiLCJkYXR1bSIsIndpbmRvd0xlZnRFZGdlIiwid2luZG93UmlnaHRFZGdlIiwiY3VycmVudCIsIm9jY1R5cGUiLCJmaWx0ZXJUZW1wbGF0ZSIsInNwbGl0IiwiZmlsdGVyV2l0aEFwcGxpY2F0aW9uIiwiaW5jbHVkZXMiLCJnZXRBbGVydE9wdGlvbnMiLCJjcmVhdGVFbGVtZW50IiwibGFiZWwiLCJpdGVtcyIsIml0ZW1Ub1N0cmluZyIsIml0ZW0iLCJzZWxlY3RlZEl0ZW0iLCJvbkNoYW5nZSIsImUiLCJ0aXRsZVRleHQiLCJ0eXBlIiwibGFiZWxUZXh0IiwiY2hlY2tlZCIsIl9yZWYiLCJfcmVmMiIsImRpc2FibGVkIiwia2luZCIsIm9uQ2xpY2siLCJvblJlZnJlc2giLCJvcmlnaW4iLCJjbGllbnRDb25maWd1cmF0aW9uIiwicHVibGljdXJsIiwid2luZG93IiwiYWRkRXZlbnRMaXN0ZW5lciIsImNoYXJ0Iiwic2VydmljZXMiLCJldmVudHMiLCJkZXRhaWwiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwib3B0aW9ucyIsImF4ZXMiLCJib3R0b20iLCJtYXBzVG8iLCJzY2FsZVR5cGUiLCJMQUJFTFMiLCJ2aXNpYmxlIiwibGVmdCIsImhlYXRtYXAiLCJjb2xvckxlZ2VuZCIsImV4cGVyaW1lbnRhbCIsImhlaWdodCIsInJvbGUiLCJyZWYiLCJtb2NrQWxlcnRzIiwiY29tcG9uZW50IiwiYXJnVHlwZXMiLCJjb250cm9sIiwiVGVtcGxhdGUiLCJhcmdzIiwiX2V4dGVuZHMiLCJEZWZhdWx0IiwiYmluZCIsIlNrZWxldG9uIiwic3R5bGUiLCJib3JkZXIiLCJwYXJhbWV0ZXJzIiwiZG9jcyIsInNvdXJjZSIsIm9yaWdpbmFsU291cmNlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///4775\n")}}]);